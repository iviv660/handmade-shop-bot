# Handmade Shop Bot üß∂

### C–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
- [üìÑ –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ](#-–∫—Ä–∞–∫—Ç–æ–µ-–æ–ø–∏—Å–∞–Ω–∏–µ)
- [üöÄ –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π](#-—Å—Ç–µ–∫-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π)
- [üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#Ô∏è-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
- [üß™ –¢–µ—Å—Ç—ã](#-—Ç–µ—Å—Ç—ã)
- [üìú Makefile –∫–æ–º–∞–Ω–¥—ã](#-makefile-–∫–æ–º–∞–Ω–¥—ã)
- [üìà Prometheus config](#-prometheus-config)
---
## üìÑ–ö—Ä–∞–∫—Ç–æ–µ –û–ø–∏—Å–∞–Ω–∏–µ
–°–µ—Ä–≤–∏—Å –∏ Telegram-–±–æ—Ç –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞ hand-made: –∫–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤, –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç—ë–∂–Ω—ã–º —à–ª—é–∑–æ–º, –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —á–µ—Ä–µ–∑ –±–æ—Ç–∞. –ë–æ—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥, –ø–æ–∫—É–ø–∞—Ç—å —Ç–æ–≤–∞—Ä—ã, –∞–¥–º–∏–Ω–∞–º ‚Äî –¥–æ–±–∞–≤–ª—è—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç—ã –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–∫–∞–∑–∞–º–∏.
–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- üì¶ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏ (CRUD)
- üõí –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–∫–∞–∑–æ–≤
- üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç—ë–∂–Ω—ã–º —Å–µ—Ä–≤–∏—Å–æ–º (—Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞)
- üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∞ –∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ Telegram
- üìä –≠–∫—Å–ø–æ—Ä—Ç –º–µ—Ç—Ä–∏–∫ –¥–ª—è Prometheus
  
## üöÄ –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- Go (—á–∏—Å—Ç—ã–µ usecase-—Å–ª–æ–∏)
- PostgreSQL ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –ë–î
- Telebot v4 ‚Äî Telegram SDK
- Docker & docker-compose ‚Äî –ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
- Prometheus / Grafana ‚Äî –º–µ—Ç—Ä–∏–∫–∏ –∏ –¥–∞—à–±–æ—Ä–¥—ã
- estify/mock ‚Äî unit-—Ç–µ—Å—Ç—ã –∏ –º–æ–∫–∏

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
```bash
git clone https://github.com/iviv660/handmade-shop-bot.git
cd handmade-shop-bot
```
2. –°–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞ —á–µ—Ä–µ–∑ BotFather –∏ –≤—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –≤ .env
3. –ó–∞–ø—É—Å–∫ —Å—Ç–µ–∫–∞:
```bash
make up
```
–ü–æ–¥–Ω–∏–º—É—Ç—Å—è: 
- service ‚Äî —Ç–≤–æ–π Go-—Å–µ—Ä–≤–∏—Å —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ (:2112/metrics);
- prometheus ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ http://localhost:9090;
- postgres ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö;
- postgres_exporter ‚Äî –º–µ—Ç—Ä–∏–∫–∏ PostgreSQL (:9187/metrics). 

–ü—Ä–æ–≤–µ—Ä–∫–∞:
- –ú–µ—Ç—Ä–∏–∫–∏ —Å–µ—Ä–≤–∏—Å–∞: http://localhost:2112/metrics 
- –ú–µ—Ç—Ä–∏–∫–∏ Postgres: http://localhost:9187/metrics 
- Prometheus UI: http://localhost:9090
4. –û—Å—Ç–∞–Ω–æ–≤–∫–∞:
```bash
make down 
```

## üß™ –¢–µ—Å—Ç—ã
–ó–∞–ø—É—Å–∫ unit-—Ç–µ—Å—Ç–æ–≤:
```bash 
make test
```

## üìú Makefile –∫–æ–º–∞–Ω–¥—ã

- make up ‚Äî –ø–æ–¥–Ω—è—Ç—å –≤–µ—Å—å —Å—Ç–µ–∫ (docker compose up -d)
- make down ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–µ–∫
- make logs ‚Äî –ª–æ–≥–∏ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- make ps ‚Äî —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- make test ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å Go-—Ç–µ—Å—Ç—ã

## üìà Prometheus config
prometheus/prometheus.yml —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç scrape-jobs –¥–ª—è:
- —Å–∞–º–æ–≥–æ Prometheus,
- Go-—Å–µ—Ä–≤–∏—Å–∞,
- Postgres Exporter.
